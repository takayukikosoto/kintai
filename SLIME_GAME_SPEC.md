# 🎮 スライムシューターゲーム 完全改訂仕様書 v2.0

## 🎯 コンセプト
**「気持ちいいバネ感」を最優先した、中毒性の高いカジュアルシューティング**

### 参考ゲーム
- Angry Birds（バネの引っ張り感）
- Slime Laboratory（スライムの気持ちいい変形）
- Fruit Ninja（爽快な当たり判定）

---

## 📊 現状の致命的な問題点

### ビジュアル
- ❌ スライムが絵文字（変形できない）
- ❌ 引っ張りに物理的な抵抗感がない
- ❌ 発射時の爽快感ゼロ
- ❌ ターゲットが静止（退屈）
- ❌ パーティクルが少なすぎ

### 物理演算
- ❌ バネの弾性がない
- ❌ 慣性がない
- ❌ スライムの「ぷるぷる感」がない
- ❌ 当たった時の「ぐにゅっ」がない

### ゲーム性
- ❌ ただ飛ばすだけ（単調）
- ❌ フィードバックが弱い
- ❌ 上達感がない

---

## 🎯 改善仕様

### 1. スライムの動き（最優先）

#### 1-1. ぬるぬる動くスライム
```
- SVG/Canvas描画による円形スライム
- 物理演算で変形（引っ張り、飛行中、着地）
- トレイルエフェクト（軌跡を残す）
- 回転アニメーション
```

**実装方法**:
```typescript
class Slime {
  // 基本プロパティ
  x, y: number
  vx, vy: number
  rotation: number
  scale: { x: number, y: number }
  
  // 変形アニメーション
  squashStretch: number  // 0-1 (押し潰し度合い)
  wobble: number         // 0-1 (ぷるぷる度合い)
  
  // トレイル
  trail: Array<{x, y, alpha}>
}
```

#### 1-2. 引っ張り演出の強化
```
- バネのような伸縮（イージング関数）
- 引っ張り方向に視覚的なライン
- パワーメーターのアニメーション
- 効果音（オプション）
```

**ビジュアル**:
```
通常時:     ●         (丸いスライム)
引っ張り中:  ◯━━━◯   (バネのように伸びる)
発射直前:   ⚡●━━━   (パワーが溜まる)
発射直後:   💨━━━→  (勢いよく飛ぶ)
```

---

### 2. ターゲットのアニメーション

#### 2-1. 浮遊アニメーション
```typescript
// 各ターゲットが上下にふわふわ動く
target.y += Math.sin(time + target.phase) * amplitude
target.rotation += rotationSpeed
```

#### 2-2. レアリティ別エフェクト
```
⭐ 50pt:  通常（ゆっくり浮遊）
💰 100pt: キラキラパーティクル
💎 200pt: 回転 + 光るオーラ
```

#### 2-3. 当たり判定時の演出
```
1. ターゲットが膨張（0.1秒）
2. 爆発パーティクル（放射状）
3. スコア表示（+200!）がフェードアウト
4. ターゲット消滅
```

---

### 3. パーティクルシステム強化

#### 3-1. 種類の追加
```typescript
enum ParticleType {
  SPARK,      // 火花（当たり判定）
  STAR,       // 星（高得点時）
  SMOKE,      // 煙（発射時）
  TRAIL,      // 軌跡（飛行中）
  CONFETTI    // 紙吹雪（ゲーム終了時）
}
```

#### 3-2. 物理演算
```typescript
class Particle {
  // 基本
  x, y, vx, vy, life, alpha
  
  // 追加
  gravity: number       // 重力の影響度
  airResistance: number // 空気抵抗
  scale: number         // サイズ
  color: string         // グラデーション対応
  rotation: number      // 回転
}
```

---

### 4. ゲーム性の改善

#### 4-1. ターゲット配置の最適化
```
- 距離別の点数調整
  - 近距離（下部）: 50pt（簡単）
  - 中距離（中央）: 100pt（普通）
  - 遠距離（上部）: 200pt（難しい）

- 動きのパターン
  - 静止: 50pt
  - ゆっくり移動: 100pt
  - 素早く移動: 200pt
```

#### 4-2. コンボシステム
```
連続ヒット時にコンボボーナス
1hit: ×1.0
2hit: ×1.2
3hit: ×1.5
```

#### 4-3. パワーアップアイテム（オプション）
```
🌟 マルチショット: 3方向に発射
⚡ スピードアップ: 初速2倍
🎯 ホーミング: ターゲットに近づく
```

---

### 5. UIの改善

#### 5-1. スコア表示
```
- アニメーション付きスコア増加
- コンボ表示（大きく派手に）
- ベストスコア表示
```

#### 5-2. 結果画面
```
┌──────────────────┐
│   🎉 GAME OVER   │
│                  │
│  スコア: 850     │
│  ベスト: 1200    │
│                  │
│  報酬: 🥤 ドリンク │
│                  │
│  統計:           │
│  命中: 8/10      │
│  精度: 80%       │
│  最長距離: 450px │
│                  │
│ [もう一度] [閉じる]│
└──────────────────┘
```

---

### 6. パフォーマンス最適化

```typescript
// フレームレート管理
const TARGET_FPS = 60
const FRAME_TIME = 1000 / TARGET_FPS

// オブジェクトプーリング
const particlePool = new Pool<Particle>(500)

// 描画の最適化
- オフスクリーンキャンバス
- レイヤー分け（背景/ゲーム/UI）
- 領域外オブジェクトの描画スキップ
```

---

## 🎨 ビジュアルコンセプト

### カラーパレット
```
背景: #1a202c (ダークブルー)
スライム: #60a5fa → #93c5fd (グラデーション)
パーティクル: #ffd700, #ff6b6b, #4ecdc4
UI: #667eea → #764ba2 (パープルグラデ)
```

### アニメーションイージング
```typescript
// スムーズな動き
easeOutCubic(t) = 1 - Math.pow(1 - t, 3)
easeInOutQuad(t) = t < 0.5 ? 2*t*t : 1 - Math.pow(-2*t + 2, 2) / 2
bounceEasing(t) = ... // バウンド効果
```

---

## 📱 実装優先順位

### Phase 1（最優先・30分）
- [x] スライムの円形描画
- [x] スムーズな移動（補間）
- [x] トレイルエフェクト
- [x] 引っ張り時の変形強化

### Phase 2（20分）
- [x] ターゲットの浮遊アニメーション
- [x] 当たり判定時の爆発演出
- [x] パーティクル種類追加

### Phase 3（15分）
- [x] コンボシステム
- [x] スコア表示アニメーション
- [x] 結果画面の改善

### Phase 4（オプション）
- [ ] 効果音
- [ ] パワーアップアイテム
- [ ] ベストスコア保存

---

## 🧪 テスト項目

- [ ] 60FPS維持（モバイルでも）
- [ ] タッチ操作の精度
- [ ] 当たり判定の正確性
- [ ] パーティクル数が多くても快適
- [ ] 複数回プレイでメモリリークなし

---

**この仕様で実装を開始しますか？**
